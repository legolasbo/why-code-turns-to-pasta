<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>reveal.js</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/drupalcamp.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section data-background-image="/Drupalcamp_wide.001.jpeg" data-background-position="top center" data-background-size="contain" data-background-repeat="no-repeat" class="title-slide">
            <h1>Why your project turns to pasta</h1>
            <h2>and what to do about it</h2>
        </section>
				<section>
                    <H1>About me</H1>
                    <ul>
                        <li>31 years old</li>
                        <li>Father of two</li>
                        <li>Programming since the age of 8</li>
                        <li>Current job: Developer at Deeson</li>
                        <li>Job starting next month: Competence Lead Drupal at Ordina</li>
                        <li>~7 years experience with Drupal 6, 7 and 8</li>
                    </ul>
                </section>
                <section>
                    <h1>Warming up</h1>
                    <aside class="notes">
                        <ul>
                            <li>Could everyone who identifies themselves a developer stand up? <em>Frontend, backend, doesn't matter</em></li>
                            <li>Could everyone who identifies as male sit down.</li>
                            <li>What's wrong with this picture?</li>
                            <li>What are we as a technical community doing to scare all these bright, talented, woman away?</li>
                        </ul>
                    </aside>
                </section>
                <section>
                    <h1>Good code</h1>
                    <section>
                        <ul class="fragment">
                            <li>Adheres to coding standards</li>
                            <li>Extensible</li>
                            <li>Reusable</li>
                            <li>Decoupled</li>
                            <li>Cohesive</li>
                            <li>Structured</li>
                            <li>Readable</li>
                        </ul>
                        <aside class="notes">
                            Ask definition of good code.
                        </aside>
                    </section>
                    <section>
                        Is maintainable.
                        
                        <aside class="notes">
                            We know this to be true, but why do we fail to write it?
                        </aside>
                    </section>
                </section>
                <section>
                    <h1>How code turns to pasta.</h1>
                    <section>
                        <aside class="notes">
                            <ul>
                                <li>Simple shopping cart checkout</li>
                            </ul>
                        </aside>
                    </section>
                    <section>
                        <pre>
                        <code data-trim class="php">
                            $total = 0;
                            foreach ($items as $item) {
                                print "$item->name: $item->price"
                                $total = $total + $item->price
                            }
                            print "Total: $total"
                        </code>
                        </pre>
                        <aside class="notes">
                            <ul>
                                <li>Client: "We need it to list all purchased items, their prices and the grand total"</li>
                            </ul>
                        </aside>
                    </section>
                    <section>
                        <pre>
                        <code data-trim class="php">
                            ...
                            print "Subtotal: $total";
                            
                            print "Shipping: $shippingCosts";
                            $total = $total + $shippingCosts;
                            print "Total:    $total;
                        </code>
                        </pre>
                    </section>
                    <aside class="notes">
                        <ul>
                            <li>Client: "Oh, we also need it to show the shipping costs and include those in the grand total"</li>
                        </ul>
                    </aside>
                    <section>
                        <pre>
                        <code data-trim class="php">
                            ...
                            print "Subtotal: $total";
                            
                            if ($account->isNewCustomer() == TRUE) {
                                $discount = $total * 0.10;
                                print "10% new customer discount: -$discount";
                                $total = $total - $discount;
                            }
                            
                            ...
                            print "Total:    $total;
                        </code>
                        </pre>
                        <aside class="notes">
                            <ul>
                                <li>Client: "Penny from marketing wants to give a 10% discount to new customers"</li>
                            </ul>
                        </aside>
                    </section>
                    <section>
                        <pre>
                        <code data-trim class="php">
                            ...
                            
                            if (...) {
                                ...
                            }
                            else {
                                ...
                            }
                            ...
                        </code>
                        </pre>
                        <aside class="notes">
                            <ul>
                                <li>Client: "Penny also wants to run various promotions"</li>
                            </ul>
                        </aside>
                    </section>
                    <section>
                        <pre class="">
                        <code data-trim class="php auto-height">
                            $total = 0;
                            foreach ($items as $item) {
                                print "$item->name: $item->price"
                                $total = $total + $item->price
                            }
                            print "Subtotal: $total";
                            
                            if ($account->isNewCustomer() == TRUE) {
                                $discount = $total * 0.10;
                                print "10% new customer discount: -$discount";
                                $total = $total - $discount;
                            }
                            if (...) {
                                ...
                            }
                            else {
                                ...
                            }
                            
                            print "Shipping: $shippingCosts";
                            $total = $total + $shippingCosts;
                            print "Total:    $total;
                        </code>
                        </pre>
                        <aside class="notes">
                            Whenever change is needed, you must read and understand it all.
                            Keeping with this approach will only make the code rot more.
                        </aside>
                    </section>
                    <section>
                        <pre>
                        <code data-trim class="php">
                            /** @var DiscountCollection **/
                            $discounts = getDiscountsFor($items, $account);
                            $total = $subtotal - $discounts->totalDiscount + $shippingCosts;
                            
                            printItems($items);
                            printSubtotal(calculateSubtotal($items));
                            printDiscounts($discounts);
                            printShipping($shippingCosts);
                            printTotal($total);
                        </code>
                        </pre>
                        <aside class="notes">
                            <ul>
                                <li>Far easier to read and change.</li>
                                <li>If the shipping costs end up being dynamic, we can easily introduce a calculateShipping method.</li>
                                <li>Changing the order in which things are printed is a matter of reordering the print... lines.</li>
                            </ul>
                        </aside>
                    </section>
                </section>
                <section>
                    <h1>Keeping code clean</h1>
                    <section>
                        <h2>What do we consider clean code?</h2>
                        <blockquote class="fragment">
                            Clean code always looks like it was written by someone who cares. There is nothing obvious that you can do to make it better
                            <cite>Michael Feathers - <em>Author of Working Effectively with Legacy Code</em></cite>
                        </blockquote>
                        <aside class="notes">
                            Clean code is <b>EASY TO READ</b>:<br>
                            <ul>
                                <li>Reads like well written prose</li>
                                <li>Requires no scrolling</li>
                                <li>Conveys intent</li>
                            </ul>
                        </aside>
                    </section>
                    <section>
                        <h2>Why should I want clean code?</h2>
                        <div class="fragment">
                            <blockquote>
                                “Indeed, the ratio of time spent reading versus writing is well over 10 to 1. We are constantly reading old code as part of the effort to write new code. ...[Therefore,] making it easy to read makes it easier to write.”
                                <caption>Robert C. Martin, Clean Code: A Handbook of Agile Software Craftsmanship</caption>
                            </blockquote>
                        </div>
                        <div class="fragment"><!-- todo! -->THIS SHOULD HAVE A GRAPH</div>
                        <aside class="notes">
                            Ask how much time we spend reading code, compared to writing code.
                            <ul>
                                <li>25:75?</li>
                                <li>50:50?</li>
                                <li>75:25?</li>
                                <li>more?</li>
                            </ul>
                            Substantial time, readable code is important.
                        </aside>
                    </section>
                    <section>
                        <h2>Use meaningful names</h2>
                        <pre class="fragment">
                        <code data-trim class="php">
                            $fn = "John" // First name
                            $ln = "Doe" // Last name
                        </code>
                        </pre>
                        <pre class="fragment">
                        <code data-trim class="php">
                            $firstName = "John"
                            $lastName = "Doe"
                        </code>
                        </pre>
                        <aside class="notes">
                            <p>The same goes for methods, functions, constants.</p>
                        </aside>
                    </section>
                    <section>
                        <h2>Use consistent return types</h2>
                        <pre class="">
                        <code data-trim class="php">
                            /**
                            * @return array|bool
                            *   The things to load or false if they could not be found.
                            **/
                            function loadThings() {
                                ...
                            }
                        </code>
                        </pre>
                    </section>
                    <section>
                        <h2>Don't return NULL</h2>
                        <div class="display-columns-2">
                            <div class="example">
                                <pre class="">
                                <code data-trim class="php">
                                    $pages = load_pages($some, $arguments);
                                    if ($pages !== NULL) {
                                        foreach($pages as $page) {
                                            // Do something.
                                        }
                                    }
                                </code>
                                </pre>
                                    <pre class="">
                                <code data-trim class="php">
                                    foreach(load_pages($some, $arguments) as $page) {
                                        // Do something.
                                    }
                                </code>
                                </pre>
                            </div>
                            <div class="example">
                                <pre class="">
                                <code data-trim class="php">
                                    $logger = $container->getLogger();
                                    if ($logger !== NULL) {
                                        $logger->log("Some message", 'success');
                                    }
                                    ...
                                    if ($logger !== NULL) {
                                        $logger->log("Some warning down the line", 'warning');
                                    }
                                </code>
                                </pre>
                                <pre class="">
                                <code data-trim class="php">
                                    $logger = $container->getLogger();
                                    $logger->log("Some message", 'success');
                                    ...
                                    $logger->log("Some warning down the line", 'warning');
                                </code>
                                </pre>
                            </div>
                        </div>
                        <aside class="notes">
                            <ul>
                                <li>You're forcing the user of your code to check for null directly after calling the method/function.</li>
                                <li>Either throw an exception or return an empty object.</li>
                            </ul>
                        </aside>
                    </section>
                    <section>
                        <h2>Prevent writing comments</h2>
                        <ul>
                            <li>Comments have to be maintained as well</li>
                            <li>Comments are lies waiting to happen</li>
                            <li>Programmers can read code</li>
                            <li>Code should be self-explanatory</li>
                            <li>Writing a comment should feel like a failure to express yourself in code</li>
                            <li>Unless it explains <strong>WHY</strong> the code does what it does</li>
                        </ul>
                    </section>
                    <section>
                        <h2>SOLID design principles</h2>
                        <ul>
                            <li>Single Responsibility Principle.</li>
                            <li>Open/Closed Principle.</li>
                            <li>Liskov Substitution Principle.</li>
                            <li>Interface Segregation Principle.</li>
                            <li>Dependency Inversion Principle.</li>
                        </ul>
                        <aside class="notes">
                            <ul>
                                <li>Coined by Robert C. Martin</li>
                                <li>These are a talk on their own</li>
                                <li>Research these principles</li>
                                <li>Most influential: Single Responsibility Principle</li>
                            </ul>
                        </aside>
                    </section>
                    <section>
                        <h2>Code review</h2>
                        <ul>
                            <li>Helps prevent bad code from entering your code base.</li>
                            <li>Points out which code is hard to read</li>
                            <li>Improves your skill as a developer</li>
                        </ul>
                        <aside class="notes">
                            <ul>
                                <li></li>
                            </ul>
                        </aside>
                    </section>
                    <section>
                        <h2>The boyscout rule</h2>
                        <blockquote>
                            "Try and leave this world a little better than you found it."
                            <caption>
                                Robert Stephenson Smyth Baden-Powell - <em>the father of scouting</em>
                            </caption>
                        </blockquote>
                        <aside class="notes">
                            <ul>
                                <li>Any effort, no matter how small, improves your code</li>
                            </ul>
                        </aside>
                    </section>
                </section>
                <section>
                    <h1>Automated testing</h1>
                    <section>
                        <h2>Acceptance tests</h2>
                        <ul>
                            <li>Are your acceptance criteria</li>
                            <li>Written in collaboration with the client</li>
                            <li>Your feature is complete when all these pass</li>
                            <li>Often tested through the UI</li>
                            <li>See <em>BrowserTestBase</em> in Drupal</li>
                        </ul>
                        <aside class="notes">
                            BDD
                        </aside>
                    </section>
                    <section>
                        <h2>Integration tests</h2>
                        <ul>
                            <li>Tests how key components of your system work together</li>
                            <li>Do not touch the UI</li>
                            <li>May need the database</li>
                            <li>See <em>KernelTestBase</em> in Drupal</li>
                        </ul>
                    </section>
                    <section>
                        <h2>Unit tests</h2>
                        <ul>
                            <li>Test individual units of code</li>
                            <li>Should be blazingly fast</li>
                            <li>Do not touch the UI</li>
                            <li>Do not touch the database</li>
                            <li>See <em>UnitTestBase</em> in Drupal</li>
                        </ul>
                    </section>
                </section>
                <section>
                    <h1>Estimation</h1>
                    <ul>
                        <li>It's just that, an estimate</li>
                        <li>Managers/clients see it as a promise</li>
                        <li>Expectaction management</li>
                        <li>Ideally consists of 3 numbers, min, best guess, max</li>
                        <li>...</li>
                    </ul>
                </section>
                <section>
                    <h1>Saying no</h1>
                    <aside class="notes">
                        <ul>
                            <li>Who starts project with the best intentions? <em>We'll do it right this time. We'll go fast!</em></li>
                            <li>Who has been slowed down by bad code?</li>
                            <li>Who has been slowed down by their own bad code?</li>
                        </ul>
                    </aside>
                </section>
			</div>
		</div>
    <aside>
        Inspiration: https://www.youtube.com/watch?v=UjhX2sVf0eg<br>
        How clean code should read: https://theholyjava.wordpress.com/2012/12/15/what-is-clean-code-quotes/<br>
    </aside>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				],
                width: 1920,
                height: 1080,
                margin: 0.05,
                controls: false,
			});
		</script>
	</body>
</html>
